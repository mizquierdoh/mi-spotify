(self.webpackChunkapp=self.webpackChunkapp||[]).push([[624],{6553:(F,P,C)=>{"use strict";C.d(P,{d:()=>B});var k=C(8735);class B{static parse(n){if(!n)return null;let v=new B;return v.id=n.id,v.name=n.name,v.releaseDate=new Date(n.releaseDate),v.artistId=n.artistId,v.artistName=n.artistName,v.externalUrl=n.externalUrl,v.href=n.href,v.uri=n.uri,v.excluded=n.excluded,v.images=n.images.map(U=>k.Q.parse(U)).sort((U,H)=>H.width-U.width),v}static parseWebPlaybackAlbum(n){let v=new B;return n&&(v.externalUrl=n.external_urls.spotify,v.href=n.href,v.id=n.id,v.images=n.images.map(U=>k.Q.parse(U)).sort((U,H)=>H.width-U.width),v.name=n.name,v.releaseDate=new Date(n.release_date),v.uri=n.uri),v}}},7986:(F,P,C)=>{"use strict";C.d(P,{l:()=>B});var k=C(8735);class B{static parse(n){if(!n)return null;let v=new B;return v.externalUrl=n.externalUrl,v.genres=n.genres,v.href=n.href,v.id=n.id,v.images=n.images.map(U=>k.Q.parse(U)).sort((U,H)=>H.width-U.width),v.name=n.name,v.uri=n.uri,v}static parseWebPlaybackArtist(n){if(!n)return null;let v=new B;return v.externalUrl=n.external_urls.spotify,v.genres=n.genres,v.href=n.href,v.id=n.id,n.images&&(v.images=n.images.map(U=>k.Q.parse(U)).sort((U,H)=>H.width-U.width)),v.name=n.name,v.uri=n.uri,v}}},8735:(F,P,C)=>{"use strict";C.d(P,{Q:()=>k});class k{static parse(g){if(!g)return null;let n=new k;return n.height=g.height,n.width=g.width,n.url=g.url,n}}},4733:(F,P,C)=>{"use strict";C.d(P,{t:()=>k});class k{static parse(g){if(!g)return null;let n=new k;return n.id=g.id,n.name=g.name,n.trackNumber=g.trackNumber,n.discNumber=g.discNumber,n.albumId=g.albumId,n.albumName=g.albumName,n.albumReleaseDate=g.albumReleaseDate,n.artistId=g.artistId,n.artistName=g.artistName,n.image=g.image,n.externalURL=g.externalURL,n.href=g.href,n.uri=g.uri,n}static parsePlayerTrack(g){let n=new k;return g&&(n.artistName=g.artists[0],n.id=g.id,n.image=g.image,n.name=g.name,n.uri=g.uri),n}static parseWebPlaybackTrack(g){let n=new k;return g&&(n.albumId=g.album.id,n.albumName=g.album.name,n.albumReleaseDate=new Date(g.album.release_date),n.artistId=g.artists[0].id,n.artistName=g.artists[0].name,n.discNumber=g.disc_number,n.externalURL=g.external_urls.spotify,n.href=g.href,n.id=g.id,n.image=g.album.images.sort((v,U)=>U.width-v.width)[0].url,n.name=g.name,n.uri=g.uri,n.trackNumber=g.track_number),n}}},624:(F,P,C)=>{"use strict";C.d(P,{$:()=>Z});var k=C(5861),B=C(6553),g=C(7986);class n{}var w,v=C(8735),U=C(4733),H=C(6738),E=C(3191),A=C(8799),S=C.n(A),b=C(8319),N=C.n(b);!function z(){var M;w=w||function(x,M){var a={},t=a.lib={},d=function(){},l=t.Base={extend:function(e){d.prototype=this;var u=new d;return e&&u.mixIn(e),u.hasOwnProperty("init")||(u.init=function(){u.$super.init.apply(this,arguments)}),u.init.prototype=u,u.$super=this,u},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var u in e)e.hasOwnProperty(u)&&(this[u]=e[u]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=t.WordArray=l.extend({init:function(e,u){e=this.words=e||[],this.sigBytes=null!=u?u:4*e.length},toString:function(e){return(e||i).stringify(this)},concat:function(e){var u=this.words,y=e.words,_=this.sigBytes;if(e=e.sigBytes,this.clamp(),_%4)for(var R=0;R<e;R++)u[_+R>>>2]|=(y[R>>>2]>>>24-R%4*8&255)<<24-(_+R)%4*8;else if(65535<y.length)for(R=0;R<e;R+=4)u[_+R>>>2]=y[R>>>2];else u.push.apply(u,y);return this.sigBytes+=e,this},clamp:function(){var e=this.words,u=this.sigBytes;e[u>>>2]&=4294967295<<32-u%4*8,e.length=x.ceil(u/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var u=[],y=0;y<e;y+=4)u.push(4294967296*x.random()|0);return new s.init(u,e)}}),r=a.enc={},i=r.Hex={stringify:function(e){var u=e.words;e=e.sigBytes;for(var y=[],_=0;_<e;_++){var R=u[_>>>2]>>>24-_%4*8&255;y.push((R>>>4).toString(16)),y.push((15&R).toString(16))}return y.join("")},parse:function(e){for(var u=e.length,y=[],_=0;_<u;_+=2)y[_>>>3]|=parseInt(e.substr(_,2),16)<<24-_%8*4;return new s.init(y,u/2)}},c=r.Latin1={stringify:function(e){var u=e.words;e=e.sigBytes;for(var y=[],_=0;_<e;_++)y.push(String.fromCharCode(u[_>>>2]>>>24-_%4*8&255));return y.join("")},parse:function(e){for(var u=e.length,y=[],_=0;_<u;_++)y[_>>>2]|=(255&e.charCodeAt(_))<<24-_%4*8;return new s.init(y,u)}},h=r.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},f=t.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var u=this._data,y=u.words,_=u.sigBytes,R=this.blockSize,V=_/(4*R);if(V=e?x.ceil(V):x.max((0|V)-this._minBufferSize,0),_=x.min(4*(e=V*R),_),e){for(var O=0;O<e;O+=R)this._doProcessBlock(y,O);O=y.splice(0,e),u.sigBytes-=_}return new s.init(O,_)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});t.Hasher=f.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(u,y){return new e.init(y).finalize(u)}},_createHmacHelper:function(e){return function(u,y){return new m.HMAC.init(e,y).finalize(u)}}});var m=a.algo={};return a}(Math),M=w.enc.Utf8,w.algo.HMAC=w.lib.Base.extend({init:function(a,t){a=this._hasher=new a.init,"string"==typeof t&&(t=M.parse(t));var d=a.blockSize,l=4*d;t.sigBytes>l&&(t=a.finalize(t)),t.clamp();for(var s=this._oKey=t.clone(),r=this._iKey=t.clone(),i=s.words,c=r.words,h=0;h<d;h++)i[h]^=1549556828,c[h]^=909522486;s.sigBytes=r.sigBytes=l,this.reset()},reset:function(){var a=this._hasher;a.reset(),a.update(this._iKey)},update:function(a){return this._hasher.update(a),this},finalize:function(a){var t=this._hasher;return a=t.finalize(a),t.reset(),t.finalize(this._oKey.clone().concat(a))}}),function(){var M=w.lib.WordArray;w.enc.Base64={stringify:function(a){var t=a.words,d=a.sigBytes,l=this._map;a.clamp(),a=[];for(var s=0;s<d;s+=3)for(var r=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,i=0;4>i&&s+.75*i<d;i++)a.push(l.charAt(r>>>6*(3-i)&63));if(t=l.charAt(64))for(;a.length%4;)a.push(t);return a.join("")},parse:function(a){var t=a.length,d=this._map;(l=d.charAt(64))&&-1!=(l=a.indexOf(l))&&(t=l);for(var l=[],s=0,r=0;r<t;r++)if(r%4){var i=d.indexOf(a.charAt(r-1))<<r%4*2,c=d.indexOf(a.charAt(r))>>>6-r%4*2;l[s>>>2]|=(i|c)<<24-s%4*8,s++}return M.create(l,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(){var x=w,M=(d=x.lib).WordArray,a=d.Hasher,t=[],d=x.algo.SHA1=a.extend({_doReset:function(){this._hash=new M.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(l,s){for(var r=this._hash.words,i=r[0],c=r[1],h=r[2],f=r[3],m=r[4],e=0;80>e;e++){if(16>e)t[e]=0|l[s+e];else{var u=t[e-3]^t[e-8]^t[e-14]^t[e-16];t[e]=u<<1|u>>>31}u=(i<<5|i>>>27)+m+t[e],u=20>e?u+(1518500249+(c&h|~c&f)):40>e?u+(1859775393+(c^h^f)):60>e?u+((c&h|c&f|h&f)-1894007588):u+((c^h^f)-899497514),m=f,f=h,h=c<<30|c>>>2,c=i,i=u}r[0]=r[0]+i|0,r[1]=r[1]+c|0,r[2]=r[2]+h|0,r[3]=r[3]+f|0,r[4]=r[4]+m|0},_doFinalize:function(){var l=this._data,s=l.words,r=8*this._nDataBytes,i=8*l.sigBytes;return s[i>>>5]|=128<<24-i%32,s[14+(i+64>>>9<<4)]=Math.floor(r/4294967296),s[15+(i+64>>>9<<4)]=r,l.sigBytes=4*s.length,this._process(),this._hash},clone:function(){var l=a.clone.call(this);return l._hash=this._hash.clone(),l}});x.SHA1=a._createHelper(d),x.HmacSHA1=a._createHmacHelper(d)}()}();class D{constructor(M,a,t,d,l){var s=this;this.consumer_key=M,this.consumer_secret=a,this.token=t,this.token_secret=d,this._version=l,this._base_url="http://api.music-story.com",this.resp=null,this._checker=function(r,i){var c=setInterval(function(){r()&&(clearInterval(c),i())},10)},this._rawurlencode_rfc3986=function(r){return encodeURIComponent(r).replace("+"," ").replace("%7E","~")},this._load=function(r,i,c){var h=document.createElement("script"),f=document.getElementsByTagName("head")[0];h.type="text/javascript";var m="";for(const e in i.data)m?m+="&":m="?",m+=e+"="+encodeURIComponent(i.data[e]);h.src=r+=m,h.onload=function(){s.resp=json,f.removeChild(h),typeof c<"u"&&c()},f.appendChild(h)},this.get=function(r,i,c,h){if(typeof c>"u"&&(c=null),i){r=r.toLowerCase();var f="getObject";s._request(r,i,null,null,f,null,null,function(){s.constructResult(r,f,h)})}},this.search=function(r,i,c,h,f){r=r.toLowerCase();var m="searchObject";!i||s._request(r,null,null,i,m,h,f,function(){s.constructResult(r,m,c)})},this._sign=function(r,i){var e,u,y,c="",h="",f="";if(r){for(e in i||(i={}),u=new Array,i)u.push(e);for(u.sort(),y=0;y<u.length;y++)c&&(c+="&"),c+=(e=s._rawurlencode_rfc3986(u[y]))+"="+s._rawurlencode_rfc3986(i[u[y]]);return h="GET&"+s._rawurlencode_rfc3986(r.toLowerCase())+"&"+s._rawurlencode_rfc3986(c),f=s._rawurlencode_rfc3986(s.consumer_secret)+"&"+s._rawurlencode_rfc3986(s.token_secret),w.HmacSHA1(h,f).toString(w.enc.Base64)}},this._request=function(r,i,c,h,f,m,e,u){!r&&"getConnector"!==f||"searchObject"===f&&!h||!f||(s.token&&s.token_secret?s._requestsuite(r,i,c,h,f,m,e,u):s.getToken(function(){s._requestsuite(r,i,c,h,f,m,e,u)}))},this._requestsuite=function(r,i,c,h,f,m,e,u){var y,_,R,V;for(R in y=s._base_url+"/"+r,i&&(y+="/"+i),"searchObject"===f&&(y+="/search"),"getConnector"===f&&(y=y+"/"+c),y+=".json",_={oauth_token:s.token,_callback:"var json="},m&&(h.page||(h.page=m)),e&&(h.pageCount||(h.pageCount=e)),h)_[R]=h[R];for(R in V=s._sign(y,_),y+="?oauth_signature="+encodeURIComponent(V),_)y+="&"+encodeURIComponent(R)+"="+encodeURIComponent(_[R]);s._load(y,{},u)},this.getToken=function(r){var i,c;s.token="",s.token_secret="",!M||(i=s._base_url+"/",s._version&&(i+=s._version+"/"),c=s._sign(i+="oauth/request_token.json",{oauth_consumer_key:s.consumer_key,_callback:"var json="}),this._load(i,{data:{oauth_consumer_key:s.consumer_key,oauth_signature:c,_callback:"var json="},async:!1},function(){s.token=s.resp.data.token,s.token_secret=s.resp.data.token_secret,r()}))},this.setToken=function(r,i){r&&(s.token=r),i&&(s._token_secret=i)},this.constructResult=function(r,i,c,h){s._checker(function(){return typeof s.resp<"u"&&null!==s.resp},function(){var f=[],m={ConsumerKey:s.consumer_key,ConsumerSecret:s.consumer_secret,AccessToken:s.token,TokenSecret:s.token_secret};if("getConnector"===i||"searchObject"===i)if(s.resp.data){var e=s.resp.count,u=s.resp.currentPage,y=s.resp.pageCount;s.resp.data.forEach(function(V){f.push(new L(s,V,r,m))});var R=new G(f,y,e,u);typeof c<"u"&&c(R,h)}else typeof c<"u"&&c([],h);else R=new L(s,s.resp,r,m),typeof c<"u"&&c(R,h)})}}}function L(x,M,a,t){for(var d in M)this[d]=M[d];var l=this;this.object_name=a,this.token=t.AccessToken,this.token_secret=t.TokenSecret,this.consumer_key=t.ConsumerKey,this.consumer_secret=t.ConsumerSecret,this.getConnector=function(s,r,i,c,h){var f="getConnector";s=s.toLowerCase(),r||(r={}),x._request(this.object_name,l.id,s,r,f,i,c,function(){s="biographies"===s?"biography":s.substr(0,s.length-1),x.constructResult(s,f,h,l)})}}function G(x,M,a,t){this._position=0,this._pageCount=M,this._count=a,this._currentPage=t,this.data=x,this.size=function(){return this._count},this.hasNextPage=function(){return this._currentPage<this._pageCount},this.hasPrevPage=function(){return this._currentPage>1},this.rewind=function(){this._position=0},this.current=function(){return this.data[this._position]?this.data[this._position]:null},this.key=function(){return this._position},this.next=function(){return++this._position,this.current()},this.prev=function(){return--this._position,this.current()},this.valid=function(){return!!this.data},this.hasNext=function(){return!!this.data[this._position+1]},this.hasPrev=function(){return!!this.data[this._position-1]}}var o=C(529);const T="95393125dd0a690b2f3d768b276dece0e556c419",I="45b956d08a34833bd75ec770dd3f2332f986ac98";let Q=(()=>{class x{constructor(a){this.http=a,this.token="",this.token_secret="",this.api=new D(T,I,this.token,this.token_secret,""),console.log("Test api",this.api),this.api.getToken(t=>{this.api.search("artist",{name:"Bones of Minerva"},d=>{console.log("searchResult",d),d.data[0].getConnector("albums",{link:"Main",format:"Album",type:"Original"},null,100,function(s,r){console.log("Albums story",s),s.data.forEach(i=>{this.api.get("Album",i.id,null,c=>{console.log(c.data),c.getConnector("spotify",{},null,100,h=>{console.log(i.title,h)})})})})})})}getToken(){let a,t;this.token="",this.token_secret="",a="http://api.music-story.com//",a+="1.0/",t=this.sign(a,{oauth_consumer_key:T}),a+="oauth/request_token.json?oauth_consumer_key=95393125dd0a690b2f3d768b276dece0e556c419&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1661768436&oauth_nonce=yRPX3viRkpl&oauth_version=1.0&oauth_signature=".concat(t),console.log("Music sotory token url:",a),this.http.get(a).subscribe(d=>{console.log("Music story:",d)})}sign(a,t){let i,c,h,f,m,d="",l="",s="",r="";if(a){for(i in t||(t={}),c=new Array,t)c.push(i);for(c.sort(),h=0;h<c.length;h++)i=this.rawurlencode_rfc3986(c[h]),f=this.rawurlencode_rfc3986(t[c[h]]),d&&(d+="&"),d+=i+"="+f;return l="GET&"+this.rawurlencode_rfc3986(a.toLowerCase())+"&"+this.rawurlencode_rfc3986(d),s=this.rawurlencode_rfc3986(I)+"&"+this.rawurlencode_rfc3986(this.token_secret),m=S()(l,s),r=N().stringify(m),r}}rawurlencode_rfc3986(a){return encodeURIComponent(a).replace("+"," ").replace("%7E","~")}}return x.\u0275fac=function(a){return new(a||x)(H.LFG(o.eN))},x.\u0275prov=H.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();var $=C(1188);let Z=(()=>{class x{constructor(a,t,d){this.spotifyService=a,this.musicStoryService=t,this.storageService=d,this.artists=[],this.albums=[],this.tracks=[],this.loaded=!1,this.building=!1}getTrack(a){return this.tracks.find(t=>t.id===a)}loadLibrary(a){var t=this;return(0,k.Z)(function*(){if(!a&&t.loaded)return;let d=!!a;const l=yield t.spotifyService.getUserProfile(),s=l.id;console.log(l);const r=yield t.storageService.get(s+"_artists"),i=yield t.storageService.get(s+"_albums"),c=yield t.storageService.get(s+"_tracks");!d&&r&&r.length>0?(t.artists=r.map(h=>g.l.parse(h)),console.log(t.artists)):d=!0,!d&&i&&i.length>0?(t.albums=i.map(h=>B.d.parse(h)),console.log(t.albums)):d=!0,!d&&c&&c.length>0?(t.tracks=c.map(h=>U.t.parse(h)),console.log(t.tracks)):d=!0,d&&(yield t.buildLibrary(s)),t.loaded=!0})()}buildLibrary(a){var t=this;return(0,k.Z)(function*(){t.building=!0,t.artists=[],t.albums=[],t.tracks=[],t.cargando=new n;let d="Todo ok";try{let l=!0,s=null;for(;l;){const r=yield t.spotifyService.getFollowedArtists(s);l=!!r.artists.cursors.after&&r.artists.cursors.after.length>0,l&&(s=r.artists.cursors.after),r.artists.items.forEach((i,c,h)=>{let f=new g.l;f.externalUrl=i.external_urls.spotify,f.genres=i.genres,f.href=i.href,f.id=i.id,f.uri=i.uri,f.images=i.images.map(m=>{let e=new v.Q;return e.height=m.height,e.width=m.width,e.url=m.url,e}).sort((m,e)=>e.width-m.width),f.name=i.name,t.artists.push(f)})}t.artists=t.artists.sort((r,i)=>r.name>i.name?1:-1),console.log(t.artists);for(const r of t.artists){l=!0;let i=0;for(;l;){const c=yield t.spotifyService.getArtistsAlbums(r.id,i);l=!!c.next,l&&(i+=5);let h=c.items.map((f,m,e)=>{let u=new B.d;return u.id=f.id,u.name=f.name,u.releaseDate=new Date(f.release_date),u.artistId=r.id,u.artistName=r.name,u.externalUrl=f.external_urls.spotify,u.href=f.href,u.uri=f.uri,u.images=f.images.map(y=>{let _=new v.Q;return _.height=y.height,_.width=y.width,_.url=y.url,_}).sort((y,_)=>_.width-y.width),u}).sort((f,m)=>f.releaseDate.getTime()-m.releaseDate.getTime());t.albums=t.albums.concat(h)}}console.log(t.albums),t.albums=t.albums.sort((r,i)=>r.artistName!==i.artistName?r.artistName<i.artistName?-1:1:r.releaseDate.getTime()-i.releaseDate.getTime());for(const r of t.albums){console.log(r),t.cargando.album=r.name,t.cargando.artist=r.artistName,l=!0;let i=0;if(!t.tracks.find(c=>c.albumId===r.id))for(;l;){const c=yield t.spotifyService.getAlbumsTracks(r.id,i);l=!!c.next,l&&(i+=50);let h=c.items.map(f=>{let m=new U.t;return m.id=f.id,m.name=f.name,m.trackNumber=f.track_number,m.discNumber=f.disc_number,m.albumId=r.id,m.albumName=r.name,m.artistId=r.artistId,m.artistName=r.artistName,m.albumReleaseDate=r.releaseDate,!!r.images&&r.images.length>0&&!!r.images[0].url&&(m.image=r.images[0].url),m.externalURL=f.external_urls.spotify,m.href=f.href,m.uri=f.uri,m}).sort((f,m)=>{let e=f.discNumber-m.discNumber;return 0!=e?e:f.trackNumber-m.trackNumber});t.tracks=t.tracks.concat(h)}}t.tracks=t.tracks.sort((r,i)=>r.artistName!==i.artistName?r.artistName<i.artistName?-1:1:r.albumReleaseDate.getTime()!==i.albumReleaseDate.getTime()?r.albumReleaseDate.getTime()-i.albumReleaseDate.getTime():i.trackNumber-r.trackNumber)}catch(l){console.error(l),d="Error: "+l}finally{t.building=!1,t.storageService.set(a+"_artists",t.artists),t.storageService.set(a+"_albums",t.albums),t.storageService.set(a+"_tracks",t.tracks),alert(d)}})()}getAlbum(a){return this.albums.find(t=>t.id===a)}getArtist(a){return this.artists.find(t=>t.id===a)}getAlbumsByArtist(a){return this.albums.filter(t=>t.artistId===a).sort((t,d)=>t.releaseDate.getTime()-d.releaseDate.getTime())}getTracksByAlbum(a){return this.tracks.filter(t=>t.albumId===a).sort((t,d)=>t.discNumber!=d.discNumber?t.discNumber-d.discNumber:t.trackNumber-d.trackNumber)}nextTrack(a){const t=this.tracks[a],d=this.getTracksByAlbum(t.albumId),l=d.indexOf(t);if(l!=d.length-1)return d[l+1];const s=this.getAlbum(t.albumId),r=this.albums.indexOf(s);return this.getTracksByAlbum(this.nextAlbum(r).id)[0]}nextAlbum(a){const t=this.albums[a],d=this.getAlbumsByArtist(t.artistId),l=d.indexOf(t);if(l!=d.length-1)return d[l+1];const s=this.getArtist(t.artistId),r=this.artists.indexOf(s);return this.getAlbumsByArtist(this.nextArtist(r).id)[0]}nextArtist(a){return this.artists[a==this.artists.length-1?0:a+1]}updateExcluded(a){let t=this.albums.indexOf(a);this.albums[t].excluded=a.excluded,console.log("Update Excluded:",this.albums[t]),this.spotifyService.getUserProfile().then(d=>{this.storageService.set(d.id+"_albums",this.albums)})}}return x.\u0275fac=function(a){return new(a||x)(H.LFG(E.s),H.LFG(Q),H.LFG($.V))},x.\u0275prov=H.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})()},7585:function(F,P,C){var k;F.exports=(k=k||function(B,g){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof global<"u"&&global.crypto&&(n=global.crypto),!n)try{n=C(2480)}catch{}var v=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},U=Object.create||function(){function o(){}return function(p){var T;return o.prototype=p,T=new o,o.prototype=null,T}}(),H={},E=H.lib={},A=E.Base={extend:function(o){var p=U(this);return o&&p.mixIn(o),(!p.hasOwnProperty("init")||this.init===p.init)&&(p.init=function(){p.$super.init.apply(this,arguments)}),p.init.prototype=p,p.$super=this,p},create:function(){var o=this.extend();return o.init.apply(o,arguments),o},init:function(){},mixIn:function(o){for(var p in o)o.hasOwnProperty(p)&&(this[p]=o[p]);o.hasOwnProperty("toString")&&(this.toString=o.toString)},clone:function(){return this.init.prototype.extend(this)}},S=E.WordArray=A.extend({init:function(o,p){o=this.words=o||[],this.sigBytes=null!=p?p:4*o.length},toString:function(o){return(o||N).stringify(this)},concat:function(o){var p=this.words,T=o.words,I=this.sigBytes,W=o.sigBytes;if(this.clamp(),I%4)for(var K=0;K<W;K++)p[I+K>>>2]|=(T[K>>>2]>>>24-K%4*8&255)<<24-(I+K)%4*8;else for(var Q=0;Q<W;Q+=4)p[I+Q>>>2]=T[Q>>>2];return this.sigBytes+=W,this},clamp:function(){var o=this.words,p=this.sigBytes;o[p>>>2]&=4294967295<<32-p%4*8,o.length=B.ceil(p/4)},clone:function(){var o=A.clone.call(this);return o.words=this.words.slice(0),o},random:function(o){for(var p=[],T=0;T<o;T+=4)p.push(v());return new S.init(p,o)}}),b=H.enc={},N=b.Hex={stringify:function(o){for(var p=o.words,T=o.sigBytes,I=[],W=0;W<T;W++){var K=p[W>>>2]>>>24-W%4*8&255;I.push((K>>>4).toString(16)),I.push((15&K).toString(16))}return I.join("")},parse:function(o){for(var p=o.length,T=[],I=0;I<p;I+=2)T[I>>>3]|=parseInt(o.substr(I,2),16)<<24-I%8*4;return new S.init(T,p/2)}},w=b.Latin1={stringify:function(o){for(var p=o.words,T=o.sigBytes,I=[],W=0;W<T;W++)I.push(String.fromCharCode(p[W>>>2]>>>24-W%4*8&255));return I.join("")},parse:function(o){for(var p=o.length,T=[],I=0;I<p;I++)T[I>>>2]|=(255&o.charCodeAt(I))<<24-I%4*8;return new S.init(T,p)}},D=b.Utf8={stringify:function(o){try{return decodeURIComponent(escape(w.stringify(o)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(o){return w.parse(unescape(encodeURIComponent(o)))}},L=E.BufferedBlockAlgorithm=A.extend({reset:function(){this._data=new S.init,this._nDataBytes=0},_append:function(o){"string"==typeof o&&(o=D.parse(o)),this._data.concat(o),this._nDataBytes+=o.sigBytes},_process:function(o){var p,T=this._data,I=T.words,W=T.sigBytes,K=this.blockSize,Q=W/(4*K),$=(Q=o?B.ceil(Q):B.max((0|Q)-this._minBufferSize,0))*K,Z=B.min(4*$,W);if($){for(var x=0;x<$;x+=K)this._doProcessBlock(I,x);p=I.splice(0,$),T.sigBytes-=Z}return new S.init(p,Z)},clone:function(){var o=A.clone.call(this);return o._data=this._data.clone(),o},_minBufferSize:0}),z=(E.Hasher=L.extend({cfg:A.extend(),init:function(o){this.cfg=this.cfg.extend(o),this.reset()},reset:function(){L.reset.call(this),this._doReset()},update:function(o){return this._append(o),this._process(),this},finalize:function(o){return o&&this._append(o),this._doFinalize()},blockSize:16,_createHelper:function(o){return function(p,T){return new o.init(T).finalize(p)}},_createHmacHelper:function(o){return function(p,T){return new z.HMAC.init(o,T).finalize(p)}}}),H.algo={});return H}(Math),k)},8319:function(F,P,C){var k,n;F.exports=(k=C(7585),n=k.lib.WordArray,k.enc.Base64={stringify:function(E){var A=E.words,S=E.sigBytes,b=this._map;E.clamp();for(var N=[],w=0;w<S;w+=3)for(var z=(A[w>>>2]>>>24-w%4*8&255)<<16|(A[w+1>>>2]>>>24-(w+1)%4*8&255)<<8|A[w+2>>>2]>>>24-(w+2)%4*8&255,o=0;o<4&&w+.75*o<S;o++)N.push(b.charAt(z>>>6*(3-o)&63));var p=b.charAt(64);if(p)for(;N.length%4;)N.push(p);return N.join("")},parse:function(E){var A=E.length,S=this._map,b=this._reverseMap;if(!b){b=this._reverseMap=[];for(var N=0;N<S.length;N++)b[S.charCodeAt(N)]=N}var w=S.charAt(64);if(w){var D=E.indexOf(w);-1!==D&&(A=D)}return function H(E,A,S){for(var b=[],N=0,w=0;w<A;w++)if(w%4){var D=S[E.charCodeAt(w-1)]<<w%4*2,L=S[E.charCodeAt(w)]>>>6-w%4*2;b[N>>>2]|=(D|L)<<24-N%4*8,N++}return n.create(b,N)}(E,A,b)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},k.enc.Base64)},8799:function(F,P,C){var k;F.exports=(k=C(7585),C(5162),C(3764),k.HmacSHA1)},3764:function(F,P,C){var k,U;F.exports=(k=C(7585),U=k.enc.Utf8,void(k.algo.HMAC=k.lib.Base.extend({init:function(A,S){A=this._hasher=new A.init,"string"==typeof S&&(S=U.parse(S));var b=A.blockSize,N=4*b;S.sigBytes>N&&(S=A.finalize(S)),S.clamp();for(var w=this._oKey=S.clone(),D=this._iKey=S.clone(),L=w.words,G=D.words,z=0;z<b;z++)L[z]^=1549556828,G[z]^=909522486;w.sigBytes=D.sigBytes=N,this.reset()},reset:function(){var A=this._hasher;A.reset(),A.update(this._iKey)},update:function(A){return this._hasher.update(A),this},finalize:function(A){var S=this._hasher,b=S.finalize(A);return S.reset(),S.finalize(this._oKey.clone().concat(b))}})))},5162:function(F,P,C){var B,g,n,v,H,E,k;F.exports=(k=C(7585),n=(g=(B=k).lib).WordArray,H=[],E=B.algo.SHA1=(v=g.Hasher).extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(A,S){for(var b=this._hash.words,N=b[0],w=b[1],D=b[2],L=b[3],G=b[4],z=0;z<80;z++){if(z<16)H[z]=0|A[S+z];else{var o=H[z-3]^H[z-8]^H[z-14]^H[z-16];H[z]=o<<1|o>>>31}var p=(N<<5|N>>>27)+G+H[z];p+=z<20?1518500249+(w&D|~w&L):z<40?1859775393+(w^D^L):z<60?(w&D|w&L|D&L)-1894007588:(w^D^L)-899497514,G=L,L=D,D=w<<30|w>>>2,w=N,N=p}b[0]=b[0]+N|0,b[1]=b[1]+w|0,b[2]=b[2]+D|0,b[3]=b[3]+L|0,b[4]=b[4]+G|0},_doFinalize:function(){var A=this._data,S=A.words,b=8*this._nDataBytes,N=8*A.sigBytes;return S[N>>>5]|=128<<24-N%32,S[14+(N+64>>>9<<4)]=Math.floor(b/4294967296),S[15+(N+64>>>9<<4)]=b,A.sigBytes=4*S.length,this._process(),this._hash},clone:function(){var A=v.clone.call(this);return A._hash=this._hash.clone(),A}}),B.SHA1=v._createHelper(E),B.HmacSHA1=v._createHmacHelper(E),k.SHA1)},2480:()=>{}}]);